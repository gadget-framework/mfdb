<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>MareFrame DB class — mfdb • mfdb</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="MareFrame DB class — mfdb" />
<meta property="og:description" content="Create a class representing a connection to a MareFrame DB" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">mfdb</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">7.0-99</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/import_hydrography_cmems.html">Import hydrographic data into MFDB</a>
    </li>
    <li>
      <a href="../articles/population.html">Storing &amp; grouping by arbitrary populations</a>
    </li>
    <li>
      <a href="../articles/tow_data.html">Storing &amp; grouping by tow metadata</a>
    </li>
    <li>
      <a href="../articles/trip.html">Storing &amp; grouping by vessel trips</a>
    </li>
    <li>
      <a href="../articles/weightmeasurements.html">Storing &amp; grouping other weight measurements</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>MareFrame DB class</h1>
    
    <div class="hidden name"><code>mfdb.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Create a class representing a connection to a MareFrame DB</p>
    </div>

    <pre class="usage"><span class='fu'>mfdb</span><span class='op'>(</span><span class='va'>schema_name</span>,
         db_params <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='op'>)</span>,
         destroy_schema <span class='op'>=</span> <span class='cn'>FALSE</span>,
         check_db_available <span class='op'>=</span> <span class='cn'>FALSE</span>,
         save_temp_tables <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>

    <span class='fu'>mfdb_disconnect</span><span class='op'>(</span><span class='va'>mdb</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>schema_name</th>
      <td><p>This can be one of:</p>
<p></p><ol>
<li><p>Postgresql schema name</p></li>
<li><p>A file path ending with "<code>.sqlite</code>" to connect to a SQLite file database</p></li>
<li><p>A file path ending with "<code>.duckdb</code>" to connect to a DuckDB file database</p></li>
</ol>

<p>If connecting to a SQLite/DuckDB database, <var>db_params</var> should remain empty (
        <var>schema_name</var> will be used as a <code>dbname</code>).</p>
<p>If connecting to a Postgres database, it can be used to
        store any number of case studies, by storing them in separate
        <em>schemas</em>. This parameter defines the schema to connect to,
        and can contain any lower case characters or underscore.</p></td>
    </tr>
    <tr>
      <th>db_params</th>
      <td><p>Extra parameters to supply to <code><a href='https://dbi.r-dbi.org/reference/dbConnect.html'>DBI::dbConnect</a></code>. By default it will
        search for a "mf" database locally, but you can override any of the parameters,
        in particular <code>host</code>, <code>dbname</code>, <code>user</code>, <code>password</code>.
        See <code><a href='https://rpostgres.r-dbi.org/reference/Postgres.html'>?RPostgres::Postgres</a></code> for more information.</p>
<p>If <code>dbname</code> looks like a SQLite database filename,
        then MFDB will use the <code>RSQLite</code> driver. If <code>dbdir</code> is set, then
        MFDB will use the <code>duckdb</code> driver. Otherwise, <code>RPostgres</code> will
        be used.</p>
<p><var>db_params</var> can also be supplied by environment variable, for example
        if a <code>MFDB_DBNAME</code> environment variable is set then it will be used
        instead of any <code>dbname</code> supplied here.</p></td>
    </tr>
    <tr>
      <th>destroy_schema</th>
      <td><p>Optional boolean. If true, all mfdb tables will be destroyed when
        connecting. This allows you to start populating your case study from
        scratch if required. The function will return NULL, you need to call
        <code>mfdb</code> again to connect, at which point the mfdb tables will be
        recreated and you can populate with data again.</p></td>
    </tr>
    <tr>
      <th>save_temp_tables</th>
      <td><p>Optional boolean. If true, any temporary tables will be made permanent
        for later inspection.</p></td>
    </tr>
    <tr>
      <th>check_db_available</th>
      <td><p>Optionabl boolean. If true, we will only check that the datbase
        connection could be made. Mostly for use in examples.</p></td>
    </tr>
    <tr>
      <th>mdb</th>
      <td><p>Database connection created by <code>mfdb()</code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A 'mfdb' object representing the DB connection</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Connect to a SQLite database file</span>
<span class='va'>mdb</span> <span class='op'>&lt;-</span> <span class='fu'>mfdb</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempfile</a></span><span class='op'>(</span>fileext <span class='op'>=</span> <span class='st'>'.sqlite'</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; 2021-05-04 15:24:34 INFO:mfdb:Creating schema from scratch
#&gt; 2021-05-04 15:24:34 INFO:mfdb:Taxonomy market_category no updates to make
#&gt; 2021-05-04 15:24:34 INFO:mfdb:Schema up-to-date</div><div class='input'><span class='fu'>mfdb_disconnect</span><span class='op'>(</span><span class='va'>mdb</span><span class='op'>)</span>

<span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='co'># NB: Requires a PostgreSQL installation, see README</span>

<span class='co'># Connect to local DB, as the "examples" case study</span>
<span class='va'>mdb</span> <span class='op'>&lt;-</span> <span class='fu'>mfdb</span><span class='op'>(</span><span class='st'>'examples'</span><span class='op'>)</span>
<span class='fu'>mfdb_disconnect</span><span class='op'>(</span><span class='va'>mdb</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='warning'>Warning: Already disconnected</span></div><div class='input'>
<span class='co'># Connect to remote server, will prompt for username/password</span>
<span class='kw'>if</span> <span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/interactive.html'>interactive</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>{</span>
    <span class='va'>mdb</span> <span class='op'>&lt;-</span> <span class='fu'>mfdb</span><span class='op'>(</span><span class='st'>'examples'</span>, db_params <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>host <span class='op'>=</span> <span class='st'>"mfdb.rhi.hi.is"</span><span class='op'>)</span><span class='op'>)</span>
<span class='op'>}</span>


</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Jamie Lentin, Bjarki Thor Elvarsson.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


