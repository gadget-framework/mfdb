<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>MareFrame DB dplyr interface — mfdb_dplyr • mfdb</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="MareFrame DB dplyr interface — mfdb_dplyr"><meta property="og:description" content="Use mfdb tables with dplyr"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">mfdb</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">7.3-99</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/import_hydrography_cmems.html">Import hydrographic data into MFDB</a>
    </li>
    <li>
      <a href="../articles/population.html">Storing &amp; grouping by arbitrary populations</a>
    </li>
    <li>
      <a href="../articles/tow_data.html">Storing &amp; grouping by tow metadata</a>
    </li>
    <li>
      <a href="../articles/trip.html">Storing &amp; grouping by vessel trips</a>
    </li>
    <li>
      <a href="../articles/weightmeasurements.html">Storing &amp; grouping other weight measurements</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>MareFrame DB dplyr interface</h1>
    
    <div class="hidden name"><code>mfdb_dplyr.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Use mfdb tables with dplyr</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">mfdb_dplyr_table</span><span class="op">(</span><span class="va">mdb</span>, <span class="va">table_name</span>, include_cols <span class="op">=</span> <span class="va">all_cols</span><span class="op">)</span>
<span class="fu">mfdb_dplyr_survey_index</span><span class="op">(</span><span class="va">mdb</span>, include_cols <span class="op">=</span> <span class="va">all_cols</span><span class="op">)</span>
<span class="fu">mfdb_dplyr_division</span><span class="op">(</span><span class="va">mdb</span>, include_cols <span class="op">=</span> <span class="va">all_cols</span><span class="op">)</span>
<span class="fu">mfdb_dplyr_sample</span><span class="op">(</span><span class="va">mdb</span>, include_cols <span class="op">=</span> <span class="va">all_cols</span><span class="op">)</span>
<span class="fu">mfdb_dplyr_predator</span><span class="op">(</span><span class="va">mdb</span>, include_cols <span class="op">=</span> <span class="va">all_cols</span><span class="op">)</span>
<span class="fu">mfdb_dplyr_prey</span><span class="op">(</span><span class="va">mdb</span>, include_cols <span class="op">=</span> <span class="va">all_cols</span><span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>mdb</dt>
<dd><p>An object created by <code>mfdb</code>()</p></dd>

    <dt>table_name</dt>
<dd><p>A table name to query in</p></dd>

    <dt>include_cols</dt>
<dd><p>Any additonal columns to include in output, see details.</p></dd>

</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>Warning: Whilst these might be handy for exploration, there is no guarantee
that code using these will continue to work from one version of MFDB to the
next.</p>
<p>There is one function for each measurement table. By default every possible
taxonomy column is included. However this is somewhat inefficient if you do
not require the data, in which case specify the columns requred with
<code>include_cols</code>. See <code>mfdb::mfdb_taxonomy_tables</code> for possible values.</p>
<p>To query taxonomy tables, use <code>mfdb_dplyr_table</code>, which works for any supplied table name.
See <code>mfdb::mfdb_taxonomy_tables</code> for possible values for <var>table_name</var>.</p>
    </div>
    <div id="value">
    <h2>Value</h2>
    

<p>A dplyr table object, for you to do as you please.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="va">mdb</span> <span class="op">&lt;-</span> <span class="fu"><a href="mfdb.html">mfdb</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>fileext <span class="op">=</span> <span class="st">'.duckdb'</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2022-06-21 10:42:40 INFO:mfdb:Creating schema from scratch</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2022-06-21 10:42:40 INFO:mfdb:Taxonomy market_category no updates to make</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2022-06-21 10:42:40 INFO:mfdb:Schema up-to-date</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Include as many columns as possible</span></span>
<span class="r-in"><span class="fu">mfdb_dplyr_sample</span><span class="op">(</span><span class="va">mdb</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># Source:   SQL [0 x 64]</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># Database: DuckDB 0.3.4 [unknown@Linux 5.13.0-1029-azure:R 4.2.0//tmp/RtmpKAJf78/filea4ff7da8880.duckdb]</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># … with 64 variables: year &lt;int&gt;, month &lt;int&gt;, age &lt;dbl&gt;, length &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   length_var &lt;dbl&gt;, length_min &lt;int&gt;, weight &lt;dbl&gt;, weight_var &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   liver_weight &lt;dbl&gt;, liver_weight_var &lt;dbl&gt;, gonad_weight &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   gonad_weight_var &lt;dbl&gt;, stomach_weight &lt;dbl&gt;, stomach_weight_var &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   gutted_weight &lt;dbl&gt;, gutted_weight_var &lt;dbl&gt;, count &lt;dbl&gt;, areacell &lt;chr&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   areacell_size &lt;dbl&gt;, areacell_depth &lt;dbl&gt;, data_source &lt;chr&gt;, gear &lt;chr&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   gear_mesh_size &lt;dbl&gt;, gear_mesh_size_min &lt;dbl&gt;, gear_mesh_size_max &lt;dbl&gt;, …</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Only include 'data_source' and 'species' columns, as well as measurements</span></span>
<span class="r-in"><span class="fu">mfdb_dplyr_sample</span><span class="op">(</span><span class="va">mdb</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'data_source'</span>, <span class="st">'species'</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># Source:   SQL [0 x 19]</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># Database: DuckDB 0.3.4 [unknown@Linux 5.13.0-1029-azure:R 4.2.0//tmp/RtmpKAJf78/filea4ff7da8880.duckdb]</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># … with 19 variables: year &lt;int&gt;, month &lt;int&gt;, age &lt;dbl&gt;, length &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   length_var &lt;dbl&gt;, length_min &lt;int&gt;, weight &lt;dbl&gt;, weight_var &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   liver_weight &lt;dbl&gt;, liver_weight_var &lt;dbl&gt;, gonad_weight &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   gonad_weight_var &lt;dbl&gt;, stomach_weight &lt;dbl&gt;, stomach_weight_var &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   gutted_weight &lt;dbl&gt;, gutted_weight_var &lt;dbl&gt;, count &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   data_source &lt;chr&gt;, species &lt;chr&gt;</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Query the sampling_type table</span></span>
<span class="r-in"><span class="fu">mfdb_dplyr_table</span><span class="op">(</span><span class="va">mdb</span>, <span class="st">'sampling_type'</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># Source:   SQL [0 x 3]</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># Database: DuckDB 0.3.4 [unknown@Linux 5.13.0-1029-azure:R 4.2.0//tmp/RtmpKAJf78/filea4ff7da8880.duckdb]</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># … with 3 variables: sampling_type &lt;chr&gt;, t_group &lt;chr&gt;, description &lt;chr&gt;</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="fu"><a href="mfdb.html">mfdb_disconnect</a></span><span class="op">(</span><span class="va">mdb</span><span class="op">)</span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Jamie Lentin, Bjarki Thor Elvarsson.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.4.</p>
</div>

      </footer></div>

  


  

  </body></html>

